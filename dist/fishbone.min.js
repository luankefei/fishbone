"use strict";!function(t,e){function n(t){return n.fn.init(t)}function o(t,e){var n,o=[].slice.call(arguments),r=1,i="boolean"==typeof o[o.length-1]?o.pop():!0;for(1===o.length&&(t=this.window?{}:this,r=0);e=o[r++];)for(n in e)!Object.prototype.hasOwnProperty.call(e,n)||!i&&n in t||(t[n]=e[n]);return t}var r=e.dispatchEvent,i=(e.documentElement,e.head||e.getElementsByTagName("head"),1);n.fn=n.prototype,o(n.fn,{mix:o,nodes:[],fishbone:i,constructor:n,length:0,init:function(t){if(t.nodeName)this.nodes=t,this.selector=null;else{this.selector=t;var o=t.split(" ");1===o.length&&"#"===o[0].charAt(0)?this.nodes=e.querySelector(o[0]):(this.nodes=e.querySelectorAll(t),this.nodes=Array.prototype.slice.call(this.nodes))}var r=Object.create(n.fn);return r.nodes=this.nodes,r.selector=this.selector,r}}),String.prototype.byteLen=function(t,e){e=e?e:2;var n=new Array(e+1).join("-");return t.replace(/[^\x00-\xff]/g,n).length},Array.prototype.random=function(t){return t[Math.floor(Math.random()*t.length)]},Array.prototype.flatten=function(t){var e=[];t.forEach(function(t){return Array.isArray[t]?e=e.concat(Array.prototype.flatten(t)):e.push(t),e})},Array.prototype.min=function(t){return Math.min.apply(0,t)},Array.prototype.max=function(t){return Math.max.apply(0,t)},Array.prototype.unique=function(){this.sort();for(var t=["1"],e=1;e<this.length;e++)this[e]!==t[t.length-1]&&t.push(this[e]);return t.shift(),t},Array.prototype.union=function(t,e){return t.concat(e).unique()},Array.prototype.first=function(){return this[0]},Array.prototype.last=function(){return this[this.length-1]};var s={},a={type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",async:!0};s.get=function(t,e){var n=a;n.url=t,s.ajax(n,e)},s.ajax=function(t,e,n){var o=t.url,r=t.type?t.type.toUpperCase():a.type,i=t.data||null,s=new XMLHttpRequest;if(s.open(r,o),"undefined"!=typeof n)for(var u in n)s["on"+u]=n[u];s.onreadystatechange=function(){if(200===s.status&&4===s.readyState){var t=s.responseText;e&&e(t)}},s.setRequestHeader("Content-type",a.contentType),s.send(i)},s.jsonp=function(t,e,n,o){var r=document.createElement("script"),i=document.querySelector("body");r.src=t+"?type=jsonp&callbackName="+n,r.id="jsonp",r.onload=o,window[n]=e.funcName,i.appendChild(r)},s.comet=function(){},s.socket=function(){};var u={};u.append=function(t){return 1===this.nodes.length?this.nodes.appendChild(t):this.nodes.forEach(function(e){var n=t.cloneNode(!0);e.appendChild(n)}),this},u.prepend=function(t){return this.nodes.nodeName?this.nodes.insertBefore(t,this.nodes.childNodes[0]):this.nodes.forEach(function(e){var n=t.cloneNode(!0);e.insertBefore(n,e.childNodes[0])}),this},u.clone=function(t){if(this.nodes.nodeName)return this.nodes.cloneNode(t);var e=[];return this.nodes.forEach(function(n){e.push(n.cloneNode(t))}),e},u.html=function(t){var e=this.nodes;return void 0!==t?(e.nodeName?e.innerHTML=t:e.forEach(function(e,n,o){e.innerHTML=t}),this):e.nodeName?e.innerHTML:""},u.remove=function(){var t=this.nodes;if(t instanceof Array)for(var e=0,n=t.length;n>e;e++){var o=t[e];o.parentNode.removeChild(o)}else t.parentNode.removeChild(t);return null},u.empty=function(){},u.after=function(){},u.before=function(){},u.css=function(){},u.width=function(){},u.attr=function(t,e){},u.eq=function(t){var e=null;try{e=this.nodes[t],e=n.fn.init(e)}catch(o){console.error("$.fn.eq只能用于复数节点集合")}return e},u.first=function(){return u.eq.call(this,0)},u.last=function(){return u.eq.call(this,this.nodes.length-1)};var c={};c.provider=function(t){var e=this,n={},o=function(){var t=window.location.hash,e=window.history;t=t.replace("#!",""),e.replaceState(null,null,t)};return this.when=function(t,o){return n[t]=o,e},this.otherwise=function(t){n.otherwise=t,c.routes=n,window.addEventListener("hashchange",o)},this};var l={};l.addEvent=function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,function(e){return n.call(t,e)})},l.removeEvent=function(t,e,n){void 0===n&&(t["on"+e]=null),t.removeEventListener?t.removeEventListener(e,n,!1):t.detechEvent("on"+e,n)},l.live=function(t,e){var n=this.selector;document.addEventListener(t,function(t){for(var o=document.querySelectorAll(n),r=0;r<o.length;r++)if(o[r]===t.target)return e.call(t.target,t)})},l.on=function(t,e){var n=this.nodes;n.nodeName?l.addEvent(n,t,e):n.forEach(function(n,o,r){l.addEvent(n,t,e)})},l.ready=function(t){var n=r?"DOMContentLoaded":"readystatechange",o=null;this.nodes===document&&("readystatechange"===n?o=function(){"complete"===e.readyState&&Function.call(t)}:l.addEvent(this.nodes,n,o,!1))},l.unbind=function(){};var h={};h.Component=function(){return this.node=null,this.view=null,this.controller=null,this.model=null,this.init=function(t){return this.node=t,this.model.init.call(this,function(){}),this},this},h.component={},h.component.init=function(t,e){var n=new h.Component;return n=Object.defineProperties(n,{data:{enumerable:!0,configurable:!0,get:function(){return this.value},set:function(t){this.value=t,this.controller.refresh(this.node)}}}),e.call(this,n)};var d={};d.validateChange=function(t){return"+"===t[0]||"-"===t[0]},d.handleSeperator=function(t){var e=t.indexOf("-");return-1!==e&&(t=t.replace("-",""),t=t.substring(0,e)+t[e].toUpperCase()+t.substring(e+1)),t},d.calculateChange=function(t,e){var n=d.getCss.call(this,t);return n=Number.parseInt(n.substring(0,n.length-2)),e=Number.parseInt(e.substring(0,e.length-2)),e=n+e+"px"},d.setCss=function(t,e){var n=d.validateChange(e);if(n&&(e=d.calculateChange.apply(this,[t,e])),t=d.handleSeperator(t),void 0!==this.nodes.nodeName)this.nodes.style[t]=e;else for(var o=0,r=this.nodes.length;r>o;o++)this.nodes[o].style[t]=e;return this},d.getCss=function(e){var n=null,o=this.nodes;return o.nodeName||(o=this.nodes[0]),n=t.getComputedStyle(o,null).getPropertyValue(e)},d.init=function(t,e){var n=null;return n=void 0===e?d.getCss.call(this,t):d.setCss.call(this,t,e)};var f={};f.getAttr=function(t){return this.nodes.nodeName?this.nodes.getAttribute(t):this.nodes[0].getAttribute(t)},f.setAttr=function(t,e){if(this.nodes.nodeName)this.nodes.setAttribute(t,e);else for(var n=0;n<this.nodes.length;n++)this.nodes[n].setAttribute(t,e);return this},f.init=function(t,e){var n=null;return n=void 0===e?f.getAttr.call(this,t):f.setAttr.call(this,t,e)},o(n,{mix:o,get:s.get,ajax:s.ajax,jsonp:s.jsonp,route:c,on:l.on,live:l.live,module:h.init,component:h.component.init}),o(n.fn,u),o(n.fn,{on:l.on,live:l.live,ready:l.ready,css:d.init,attr:f.init}),t.$=t.Fishbone=n}(window,window.document);